<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ø³Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --main-color: #ffcc00;      
  --hover-color: #ffdd33;     
  --bg-dark: #0d0d0d;
  --card-bg: #121212;
  --card-hover-bg: #1c1c1c;
  --card-border: #ffcc00;
  --card-hover-border: #ffdd33;
  --text-muted: #bbb;
  --footer-text: #aaa;
  --footer-border: #444;
}

body {
  margin: 0;
  font-family: 'Tajawal', sans-serif;
  background-color: var(--bg-dark);
  color: var(--main-color);
  transition: all 0.4s ease;
}

header {
  text-align: center;
  padding: 40px 20px;
  background: linear-gradient(to bottom, #111 60%, #1a1a1a);
  border-bottom: 3px solid var(--main-color);
}

header h1 {
  font-size: 2.5em;
  margin: 0;
}

.container {
  max-width: 1000px;
  margin: auto;
  padding: 20px;
}

.order-card {
  background-color: var(--card-bg);
  border: 2px solid var(--card-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 6px 16px rgba(255, 204, 0, 0.15);
}

.order-card h2 {
  margin: 0 0 10px 0;
  font-size: 1.6em;
  color: var(--main-color);
}

.order-card .order-items {
  margin: 10px 0;
}

.order-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  font-size: 1.05em;
}

.order-item span {
  color: var(--text-muted);
}

.total {
  font-weight: bold;
  margin-top: 10px;
  font-size: 1.1em;
}

label {
  display: block;
  margin: 15px 0 5px 0;
}

input[type="text"] {
  width: 100%;
  padding: 8px 10px;
  border-radius: 6px;
  border: 1px solid var(--main-color);
  background-color: #1c1c1c;
  color: var(--main-color);
}

.btns {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}

button {
  flex: 1;
  padding: 12px 24px;
  background-color: var(--main-color);
  color: #000;
  border: none;
  border-radius: 12px;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background-color: var(--hover-color);
  transform: scale(1.05);
}

footer {
  text-align: center;
  padding: 20px;
  font-size: 14px;
  color: var(--footer-text);
  border-top: 1px solid var(--footer-border);
  margin-top: 40px;
}
</style>
</head>
<body>

<header>
  <h1>Ø³Ù„Ø© Ø·Ù„Ø¨Ø§ØªÙƒ</h1>
</header>

<div class="container">

  <div class="order-card">
    <h2>Ø·Ù„Ø¨ Ø§Ø­Ù„Ù‰ Ø¹Ù…ÙŠÙ„</h2>
    <div class="order-items" id="orderItems"></div>
    <div class="total" id="totalAmount">Ø§Ù„Ù…Ø¨Ù„Øº ÙƒØ§Ù…Ù„ Ù‡Ùˆ: 0 Ø±ÙŠØ§Ù„</div>

    <label for="customerName">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
    <input type="text" id="customerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">

    <div class="btns">
      <button id="locationBtn">Ù…ÙˆÙ‚Ø¹Ùƒ</button>
      <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
  </div>

</div>

<footer>
  &copy; 2025 Ù…ØªØ¬Ø± A_delivery - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
  <br>
  Ù…Ø¹ ØªØ­ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„ÙˆØ§Ø­Ø¯
</footer>

<script>
  let orders = JSON.parse(localStorage.getItem('orders')) || [];

  const orderItemsDiv = document.getElementById('orderItems');
  const totalAmountDiv = document.getElementById('totalAmount');
  const sendBtn = document.getElementById('sendBtn');
  const locationBtn = document.getElementById('locationBtn');
  const customerNameInput = document.getElementById('customerName');

  let userLocation = ""; // Ù„Ø§Ø²Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹Ù‡

  function updateOrderCard(){
    orderItemsDiv.innerHTML = '';
    let total = 0;
    orders.forEach(item => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      const div = document.createElement('div');
      div.classList.add('order-item');
      div.innerHTML = `${item.quantity} Ã— ${item.name} <span>${itemTotal} Ø±ÙŠØ§Ù„</span>`;
      orderItemsDiv.appendChild(div);
    });

    totalAmountDiv.textContent = `Ø§Ù„Ù…Ø¨Ù„Øº ÙƒØ§Ù…Ù„ Ù‡Ùˆ: ${total} Ø±ÙŠØ§Ù„`;
  }

  updateOrderCard();

  // Ø²Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
  locationBtn.addEventListener('click', () => {
    window.open("https://maps.google.com/maps?q=My+Location", "_blank");
    userLocation = "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÙŠ - ÙŠØ±Ø¬Ù‰ Ù†Ø³Ø®Ù‡ Ù…Ù† Ø®Ø±Ø§Ø¦Ø· Ù‚ÙˆÙ‚Ù„";
  });

  // Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
  sendBtn.addEventListener('click', () => {
    const customerName = customerNameInput.value.trim();

    if(customerName === ''){
      alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„.');
      return;
    }

    if(userLocation === ""){
      alert('ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨.');
      return;
    }

    let total = orders.reduce((sum, item) => sum + item.price * item.quantity, 0);

    let message = 
`> *Â»Ø¬Ø¨ Ù„ÙŠ ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ù…Ø´Ø§ÙˆÙŠØ±Â»*
*âŒ¬â”â”â” â€¢ â”â”à¼»ğŸ”à¼ºâ” â€¢ â”â”â”âŒ¬*
\`Ø§Ù„Ù€Ø·Ù€Ù„Ø¨  |   |   request\`

`;

    orders.forEach(item => {
      message += `ã€${item.quantity}ã€Â» ${item.name} = ${item.price * item.quantity} Ø±ÙŠØ§Ù„\n`;
    });

    message += 
`
*âŒ¬â”â”â” â€¢ â”â”à¼»ğŸ”à¼ºâ” â€¢ â”â”â”âŒ¬*
\`Ø³Ø¹Ø± Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Â» ã€${total} Ø±ÙŠØ§Ù„ã€\`
\`Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Â» ã€${customerName}ã€\`
\`Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Â» ã€${userLocation}ã€\`
> Ù…Ù€Ù„Ø§Ø­Ù€Ù€Ø¸Ù€Ø© âš ï¸: Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ 
`;

    const whatsappURL = `https://wa.me/+966566257777?text=${encodeURIComponent(message)}`;
    window.open(whatsappURL, '_blank');
  });
</script>

</body>
</html>